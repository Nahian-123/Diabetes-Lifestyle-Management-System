<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Doctor Weekly Schedule</title>

<!-- Bootstrap CSS + Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">


<style>
/* --- COPY FROM DASHBOARD --- */
    .sidebar-sticky {
        padding-top: 20px;
        height: 100vh;
        background-color: #f8f9fa;
    }

    .sidebar-logo-img {
        width: 150px;          /* adjust size as needed */
        height: 150px;         /* must be equal to width */
        object-fit: cover;     /* crops the image to fill the circle */
        border-radius: 50%;    /* makes it a circle */
        border: 3px solid #007bff; /* optional: add blue border */
    }

    .sidebar-sticky .nav-link {
        font-size: 16px;
        font-weight: bold;
        padding: 10px 20px;
        margin-bottom: 10px;
        color: #333;
        background-color: #8b99aa;
        border-radius: 8px;
        text-align: center;
        transition: all 0.3s ease;
    }
    .sidebar-sticky .nav-link:hover {
        background-color: #007bff;
        color: #fff;
        transform: scale(1.05);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .sidebar-sticky .nav-link.active {
        background-color: #007bff;
        color: white;
    }

    /* ---schedule styles--- */
    .flash-box {
        position: fixed;
        top: 15px;
        left: 90%;
        transform: translateX(-50%);
        padding: 15px 25px;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        font-size: 16px;
        opacity: 0;
        z-index: 9999;
        animation: fadeInOut 5s ease-in-out forwards;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .flash-success {
        background-color: #28a745;
    }

    .flash-error {
        background-color: #dc3545;
    }

    @keyframes fadeInOut {
        0% { opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { opacity: 0; }
    }
    .page-title {
        color: #2c54cb;
    }
    
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f4f6ff;
    }
    h2 {
        text-align: center;
    }
    .schedule-box {
        background: #f7f9fc;
        border: 1px solid #dce3eb;
        padding: 20px;
        width: 350px;
        border-radius: 10px;
        margin-bottom: 20px;
        transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
    }

    .schedule-box:hover {
        transform: scale(1.03); /* bigger scale */
        box-shadow: 0 6px 12px rgba(0,0,0,0.25); /* stronger shadow */
        background-color: rgba(0, 123, 255, 0.1);  
        cursor: pointer;
    }

    .weeklyschedule-box {
        background: #ffffff;
        padding: 20px;
        width: 350px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 0 10px #a9a9a9;
        margin: 0 auto;     /* centers horizontally -> added*/
    }
    .container {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
    }
    label {
        font-weight: bold;
    }
    select, button {
        padding: 8px;
        width: 100%;
        margin-top: 10px;
        margin-bottom: 10px;
        border: 1px solid #dce3eb;
    }

    #updateBtn {
        width: 100%;
        padding: 12px;
        background: #000000;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        display: block;
        margin: auto;
        cursor: pointer;
    }

    #updateBtn:hover {
        opacity: 0.65;
    }
    
    .slot-wrapper {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-top: 15px;
        
    }

    .slot-card {
        padding: 15px;
        background: #f7f9fc;
        border: 1px solid #dce3eb;
        border-radius: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
    }

    .slot-left {
        font-size: 15px;
        font-weight: 600;
    }

    .slot-time {
        font-size: 14px;
        color: #555;
    }

    .slot-duration {
        font-size: 14px;
        font-weight: 600;
        color: #7b8ab8;
    }

    .slot-card.booked {
        background-color: #ffcdd2;
        border-color: #ef9a9a;
    }

    .slot-card:hover {
        transform: scale(1.03); /* bigger scale */
        box-shadow: 0 6px 12px rgba(0,0,0,0.25); /* stronger shadow */
        background-color: rgba(0, 123, 255, 0.1);  
        cursor: pointer;
    }

    .slot-card.booked:hover {
        transform: scale(1.03);
        box-shadow: 0 6px 12px rgba(0,0,0,0.25);
        background-color: #db8d8d; /* darker red */
        cursor: not-allowed;
    }


    .online_offline-box {
        border: 1px solid #28a745;
        background: #d4edda;
        /* background: #a7d2f5;        */
        padding: 5px 80px; /* 5px vertical (top & bottom), 20px horizontal (left & right) */
        border-radius: 6px;
        display: inline-block;     /* helps keep box small */
        font-weight: bold;
        color: #28a745;
    }


</style>
</head>
<body>
<!--FLASH MESSAGE-->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div id="flash-message" class="flash-box">
                {{ messages[0] }}
            </div>
        {% endif %}
    {% endwith %}

<div class="container-fluid">
    <div class="row">

        <!-- ===== SIDEBAR COPIED FROM DASHBOARD ===== -->
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
            <div class="sidebar-sticky">



                <!-- ⭐ Logo Section START -->
                <div class="sidebar-logo text-center my-3">
                    <img src="{{ url_for('static', filename='DLMS logo.png') }}"
                        class="img-fluid sidebar-logo-img"
                        alt="Logo">
                    <h5 class="mt-2 fw-bold">DLMS</h5>
                </div>
                <!-- ⭐ Logo Section END -->



                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('doctor_dashboard') }}">
                            <i class="bi bi-grid-fill"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('update_doctor_profile') }}">
                            <i class="bi bi-person-fill"></i> Update Profile
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('update_schedule') }}">
                            <i class="bi bi-clock-fill"></i> Update Schedule
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('doctor_appointments') }}">
                            <i class="bi bi-calendar-check-fill"></i> Appointments
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('doctor_diet_suggestion') }}">
                            <i class="bi bi-file-text-fill"></i> Suggest Diet Plan
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('doctor_prescriptions') }}">
                            <i class="bi bi-file-text-fill"></i> Write Prescription
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('doctor_all_previous_prescriptions') }}">
                            <i class="bi bi-list-task"></i> View Prescriptions
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('my_zoom_meetings') }}">
                            <i class="bi bi-camera-video-fill"></i> Zoom Meetings
                        </a>
                    </li>
                     <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('doctor_reviews') }}">
                            <i class="bi bi-star-fill"></i> My Reviews
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('index') }}">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- ===== MAIN CONTENT AREA ===== -->
        <!-- <main class="col-md-10 ms-sm-auto px-4 py-3">



            <h2 class="page-title">Doctor Weekly Schedule</h2> -->
            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Doctor schedule</h1>
                <p class="doctor-id text-center">Your ID: {{ d_id }}</p>
            </div>

            <form method="POST" action="/update_schedule">

            <div class="weeklyschedule-box" style="width: 100%; max-width: 1250px;">
            <div class="container">
                <!-- Day 1 -->
                <div class="schedule-box">
                    <h3>Day 1 (Offline)</h3>

                    <label>Select Day:</label>
                    <select name="day1" required>
                        <option value="">-- choose --</option>
                        <option {% if schedule.day1=='Saturday' %}selected{% endif %}>Saturday</option>
                        <option {% if schedule.day1=='Sunday' %}selected{% endif %}>Sunday</option>
                        <option {% if schedule.day1=='Monday' %}selected{% endif %}>Monday</option>
                        <option {% if schedule.day1=='Tuesday' %}selected{% endif %}>Tuesday</option>
                        <option {% if schedule.day1=='Wednesday' %}selected{% endif %}>Wednesday</option>
                        <option {% if schedule.day1=='Thursday' %}selected{% endif %}>Thursday</option>
                    </select>
                    
                    <label>Start Time: </label>
                    <select name="day1_start" required>
                        <option value="">-- choose --</option>
                        {% for t in ['08:00','09:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00'] %}
                            <option {% if schedule.day1_starttime==t %}selected{% endif %}>{{ t }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Day 2 -->
                <div class="schedule-box">
                    <h3>Day 2 (Offline)</h3>

                    <label>Select Day:</label>
                    <select name="day2" required>
                        <option value="">-- choose --</option>
                        <option {% if schedule.day2=='Saturday' %}selected{% endif %}>Saturday</option>
                        <option {% if schedule.day2=='Sunday' %}selected{% endif %}>Sunday</option>
                        <option {% if schedule.day2=='Monday' %}selected{% endif %}>Monday</option>
                        <option {% if schedule.day2=='Tuesday' %}selected{% endif %}>Tuesday</option>
                        <option {% if schedule.day2=='Wednesday' %}selected{% endif %}>Wednesday</option>
                        <option {% if schedule.day2=='Thursday' %}selected{% endif %}>Thursday</option>
                    </select>

                    <label>Start Time:</label>
                    <select name="day2_start" required>
                        <option value="">-- choose --</option>
                        {% for t in ['08:00','09:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00'] %}
                            <option {% if schedule.day2_starttime==t %}selected{% endif %}>{{ t }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Telemedicine Day -->
                <div class="schedule-box">
                    <h3>Telemedicine Day</h3>

                    <label>Select Day:</label>
                    <select name="teleday" required>
                        <option value="">-- choose --</option>
                        <option {% if schedule.teleday=='Saturday' %}selected{% endif %}>Saturday</option>
                        <option {% if schedule.teleday=='Sunday' %}selected{% endif %}>Sunday</option>
                        <option {% if schedule.teleday=='Monday' %}selected{% endif %}>Monday</option>
                        <option {% if schedule.teleday=='Tuesday' %}selected{% endif %}>Tuesday</option>
                        <option {% if schedule.teleday=='Wednesday' %}selected{% endif %}>Wednesday</option>
                        <option {% if schedule.teleday=='Thursday' %}selected{% endif %}>Thursday</option>
                    </select>

                    <label>Start Time:</label>
                    <select name="teleday_start" required>
                        <option value="">-- choose --</option>
                        {% for t in ['08:00','09:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00'] %}
                            <option {% if schedule.teleday_starttime==t %}selected{% endif %}>{{ t }}</option>
                        {% endfor %}
                    </select>
            </div>
        </div>


<br>
<button type="submit" id="updateBtn">Update Schedule</button>
<br>
</form>
</div>
<br><br>

<!-- Weekly Schedule Preview -->
<div class="weeklyschedule-box" style="width: 100%; max-width: 1250px;">
    <h3 style="text-align:center;">Weekly Schedule Preview</h3>
    
    <br><br>
    <!-- DAY1 -->
    <h4>Day 1- {{ schedule.day1 }} <div class="online_offline-box">Offline</div> </h4>

    <div class="slot-wrapper">
        {% for i in range(slots.day1_slots|length) %}
        <div class="slot-card {% if slots.day1_slots[i] == 1 %}booked{% endif %}">
            <div class="slot-left">
                Slot {{ i + 1 }}<br>
                <span class="slot-time">{{ day1_times[i] }}</span>
            </div>
            <div class="slot-duration">30 min</div>
        </div>
        {% endfor %}
    </div>
    <br><br>

    <!-- DAY2 -->
    <h4>Day 2- {{ schedule.day2 }} <div class="online_offline-box">Offline</div> </h4>

    <div class="slot-wrapper">
        {% for i in range(slots.day2_slots|length) %}
        <div class="slot-card {% if slots.day2_slots[i] == 1 %}booked{% endif %}">
            <div class="slot-left">
                Slot {{ i + 1 }}<br>
                <span class="slot-time">{{ day2_times[i] }}</span>
            </div>
            <div class="slot-duration">30 min</div>
        </div>
        {% endfor %}
    </div>
    
    <br><br>
    <!-- TELEDAY -->
    <h4>Telemedicine Day- {{ schedule.teleday }} <div class="online_offline-box">Online</div></h4>

    <div class="slot-wrapper">
        {% for i in range(slots.teleday_slots|length) %}
        <div class="slot-card {% if slots.teleday_slots[i] == 1 %}booked{% endif %}">
            <div class="slot-left">
                Slot {{ i + 1 }}<br>
                <span class="slot-time">{{ teleday_times[i] }}</span>
            </div>
            <div class="slot-duration">30 min</div>
        </div>
        {% endfor %}
    </div>

</div>


</form>


<!-- JS for flash animation -->
<script>
    window.onload = function() {
        const flashBox = document.getElementById('flash-message');
        if (flashBox) {
            const msg = flashBox.textContent.toLowerCase();
            if (msg.includes('success')) {
                flashBox.classList.add('flash-success');
            } else {
                flashBox.classList.add('flash-error');
            }
        }
    }
</script>
</body>
</html>
